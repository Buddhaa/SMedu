<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cyber.smedu.mapper.PayMapper">
<select id="selectStudentPayCardinal" parameterType="String" resultType="com.cyber.smedu.pay.domain.PayDomain">
	SELECT
		p.cardinal_code as cardinalCode,
		c.year as year,
		c.semester as semester,
		c.cardinal as cardinal
	FROM
		pay p
	INNER JOIN
		cardinal c
	ON
		p.cardinal_code = c.cardinal_code
	WHERE
		p.student_code = #{studentCode}
</select>
<select id="selectStudentCardinalClassRegistration" parameterType="java.util.Map" resultType="com.cyber.smedu.pay.domain.ClassRegistrationDomain">
	SELECT
		c.cardinal_code as cardinalCode,
		c.student_code as studentCode,
		c.open_subject_code as openSubjectCode,
		o.subject_code as subjectCode,
		o.subject_name as subjectName
	FROM
		class_registration c
	INNER JOIN
		open_subject o
	ON
		c.open_subject_code = o.open_subject_code
	WHERE		
		c.student_code = #{studentCode}
	AND
		c.cardinal_code = #{cardinalCode}
	AND
		c.pay_state = 'T'
</select>
<!-- 의기 -->
<select id="selectClassregistrationPayHistory" resultType="java.util.Map" parameterType="com.cyber.smedu.pay.domain.ClassRegistrationDomain">
	select 
		cr.class_registration_code as classRegistrationCode, 
		cr.cardinal_code as cardinalCode, 
		cr.student_code as studentCode, 
		cr.open_subject_code as openSubjectCode, 
		cr.class_registration_amount as classRegistrationAmount, 
		cr.class_registration_date as classRegistrationDate, 
		cr.pay_state as payState,
		osc.subject_name as subjectName
	from
		class_registration as cr
	inner join
		open_subject as osc
	on
		cr.open_subject_code = osc.open_subject_code
	where
		cr.student_code = #{studentCode}
	</select>
<!-- 현호 -->
</mapper>